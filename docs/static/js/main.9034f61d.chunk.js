(this.webpackJsonpfcc2=this.webpackJsonpfcc2||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(12),c=n.n(a),s=(n(27),n(28),n(7)),i=n.n(s),o=n(14),u=n(10),l=n(5),d=n(17),j=Object(d.createApi)({reducerPath:"notesApi",baseQuery:Object(d.fetchBaseQuery)({baseUrl:"https://crud-rtk-default-rtdb.europe-west1.firebasedatabase.app/"}),tagTypes:["Note"],endpoints:function(e){return{fetchNotes:e.query({query:function(){return{url:"/notes.json"}},providesTags:function(e){return["Note"]}}),createNote:e.mutation({query:function(e){return{url:"/notes.json",method:"POST",body:e}},invalidatesTags:["Note"]}),updateNote:e.mutation({query:function(e){return{url:"/notes/".concat(e.firebaseId,".json"),method:"PUT",body:e}},invalidatesTags:["Note"]}),removeNote:e.mutation({query:function(e){return{url:"/notes/".concat(e.firebaseId,".json"),method:"DELETE"}},invalidatesTags:["Note"]})}}}),p=j.useFetchNotesQuery,b=j.useCreateNoteMutation,f=j.useUpdateNoteMutation,O=j.useRemoveNoteMutation,x=n(2),m=function(e){var t=e.note,n=e.remove,a=e.update,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1],d=t.id,j=t.body,p=t.date,b=Object(r.useRef)(null),f=Object(r.useState)(j),O=Object(l.a)(f,2),m=O[0],v=O[1],y=function(){o(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",y),function(){return window.removeEventListener("keydown",y)}}),[i]),Object(x.jsxs)("li",{className:"notes__item",children:[Object(x.jsx)("div",{className:"notes__item-left",children:Object(x.jsxs)("p",{children:[d,".",Object(x.jsx)("input",{type:"text",onClick:function(e){return e.stopPropagation()},onChange:function(e){return v(e.target.value)},ref:b,value:m,disabled:!i})]})}),Object(x.jsxs)("div",{className:"notes__item-right",children:[Object(x.jsx)("em",{className:i?"moved":"",children:p&&p.substring(4,21)}),Object(x.jsx)("img",{className:i?"active":"",onClick:function(e){if(i){var n=Object(u.a)(Object(u.a)({},t),{},{body:m,date:(new Date).toString()});a(n),o(!1)}else!function(e){e.stopPropagation(),o(!0),setTimeout((function(){var e;null===(e=b.current)||void 0===e||e.focus()}),0)}(e)},src:"./img/pencil.".concat(i?"gif":"png"),alt:""}),Object(x.jsx)("span",{onClick:function(){n(t)},children:"\xd7"})]})]})},v=(n(36),function(){return Object(x.jsx)("div",{className:"loaderWrap",children:Object(x.jsx)("div",{className:"loadingio-spinner-blocks-mty7grqp7kl",children:Object(x.jsxs)("div",{className:"ldio-qw2vmiyfhg",children:[Object(x.jsx)("div",{style:{left:"38px",top:"38px",animationDelay:"0s"}}),Object(x.jsx)("div",{style:{left:"80px",top:"38px",animationDelay:"0.125s"}}),Object(x.jsx)("div",{style:{left:"122px",top:"38px",animationDelay:"0.25s"}}),Object(x.jsx)("div",{style:{left:"38px",top:"80px",animationDelay:"0.875s"}}),Object(x.jsx)("div",{style:{left:"122px",top:"80px",animationDelay:"0.375s"}}),Object(x.jsx)("div",{style:{left:"38px",top:"122px",animationDelay:"0.75s"}}),Object(x.jsx)("div",{style:{left:"80px",top:"122px",animationDelay:"0.625s"}}),Object(x.jsx)("div",{style:{left:"122px",top:"122px",animationDelay:"0.5s"}})]})})})}),y=function(){var e,t=p(),n=t.data,a=void 0===n?{}:n,c=t.isLoading,s=t.error,d=Object(r.useState)(""),j=Object(l.a)(d,2),y=j[0],h=j[1],g=b(),N=Object(l.a)(g,1)[0],w=f(),k=Object(l.a)(w,1)[0],D=O(),T=Object(l.a)(D,1)[0],S=Object(r.useRef)(null),q=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={body:y,date:(new Date).toString()},e.next=4,N(n);case 4:h("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("form",{onSubmit:q,children:Object(x.jsx)("input",{ref:S,type:"text",value:y,onChange:function(e){return h(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438..."})}),Object(x.jsxs)("ul",{className:"notes",children:[c&&Object(x.jsx)(v,{}),s&&Object(x.jsx)("p",{style:{color:"red"},children:"alas..."}),(e=a,e?Object.entries(e).map((function(e,t){return Object(u.a)(Object(u.a)({},e[1]),{},{id:t+1,firebaseId:e[0]})})):[]).map((function(e){return Object(x.jsx)(m,{note:e,update:C,remove:E},e.firebaseId)}))]})]})},h=function(){return Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("p",{children:"CRUD-\u0448\u043f\u0430\u0440\u0433\u0430\u043b\u043a\u0430 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e RTK Query"}),Object(x.jsx)(y,{})]})},g=n(8),N=n(22),w=n(0),k=Object(N.a)({},j.reducerPath,j.reducer),D=Object(w.configureStore)({reducer:k,middleware:function(e){return e().concat(j.middleware)}});c.a.render(Object(x.jsx)(g.Provider,{store:D,children:Object(x.jsx)(h,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.9034f61d.chunk.js.map